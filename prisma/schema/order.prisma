enum OrderStatus {
    PLACED
    SHIPPED
    DELIVERED
}

model Order {
    id         String      @id @default(uuid())
    customerId String
    total      Float
    address    String
    status     OrderStatus @default(PLACED)
    createdAt  DateTime    @default(now())
    updatedAt  DateTime    @updatedAt

    customer   User         @relation(fields: [customerId], references: [id], onDelete: Cascade)
    orderItems OrderItems[]
    reviews    Review[]

    @@index([customerId])
    @@index([status])
}

model OrderItems {
    id         String   @id @default(uuid())
    orderId    String
    medicineId String
    quantity   Int
    price      Decimal
    createdAt  DateTime @default(now())

    order    Order    @relation(fields: [orderId], references: [id], onDelete: Cascade)
    medicine Medicine @relation(fields: [medicineId], references: [id], onDelete: Restrict)

    @@index([orderId])
    @@index([medicineId])
}
